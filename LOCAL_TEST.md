# 로컬 테스트 가이드 - PIN 로그인 시스템

## 🚀 로컬 서버 실행 방법

### 1단계: 터미널 열기

프로젝트 루트 디렉토리로 이동:
```bash
cd /Users/a./Desktop/vscode/seoulier_parttimer
```

### 2단계: 서버와 클라이언트 동시 실행

```bash
npm run dev
```

이 명령어는 다음을 동시에 실행합니다:
- **백엔드 서버** (SQLite): http://localhost:5001
- **프론트엔드** (Vite): http://localhost:5173

### 또는 개별 실행

#### 백엔드만 실행:
```bash
cd server
npm run dev
```

#### 프론트엔드만 실행:
```bash
cd client
npm run dev
```

## 🔑 테스트 PIN 번호

| 이름 | 역할 | PIN |
|------|------|-----|
| 관리자 | admin | **0000** |
| 이수진 | staff | **1234** |
| 배경현 | staff | **2345** |
| 채윤아 | staff | **3456** |
| 황성윤 | staff | **4567** |
| 임수민 | staff | **5678** |
| 김태오 | staff | **6789** |
| 웅 | staff | **7890** |
| 김채원 | staff | **8901** |

## ✅ 테스트 체크리스트

### 1. 로그인 테스트
- [ ] 관리자 PIN (0000) 입력 → 로그인 성공
- [ ] 직원 PIN (1234) 입력 → 로그인 성공
- [ ] 잘못된 PIN (9999) 입력 → "PIN 번호가 잘못되었습니다" 메시지 확인
- [ ] 3자리 PIN 입력 → 로그인 버튼 비활성화 확인
- [ ] 숫자가 아닌 문자 입력 → 입력 안 됨 확인

### 2. 직원 기능 테스트 (PIN: 1234로 로그인)
- [ ] 출근 버튼 클릭 → "출근 처리되었습니다" 메시지
- [ ] 출근 후 출근 버튼 비활성화 확인
- [ ] 퇴근 버튼 클릭 → "퇴근 처리되었습니다" 메시지
- [ ] 근무 내역에 오늘 날짜 기록 확인
- [ ] 근무 시간 자동 계산 확인 (15:00~17:00 휴게시간 제외)
- [ ] 월별 필터 변경 → 해당 월 데이터만 표시

### 3. 관리자 기능 테스트 (PIN: 0000으로 로그인)
- [ ] 인원별 근무시간 통계 확인
- [ ] 전체 근무 기록 확인
- [ ] 직원별 필터 선택 → 해당 직원 데이터만 표시
- [ ] 대기 중인 근무 기록 승인 → 상태가 "승인"으로 변경
- [ ] 근무 기록 수정 → 시간 변경 후 저장
- [ ] 근무 기록 삭제 → 확인 후 삭제

### 4. UI/UX 테스트
- [ ] PIN 입력 시 숫자 키패드 표시 (모바일)
- [ ] 4자리 입력 완료 시 로그인 버튼 활성화
- [ ] 로그아웃 후 PIN 입력 필드 초기화
- [ ] 메시지 표시 후 3초 뒤 자동 사라짐

## 🗄️ 데이터베이스 위치

로컬 테스트 시 SQLite 데이터베이스 파일:
```
/Users/a./Desktop/vscode/seoulier_parttimer/server/database.db
```

### 데이터베이스 초기화 (필요 시)

데이터를 리셋하려면:
```bash
cd server
rm database.db
npm run dev
```

서버가 자동으로 새 데이터베이스를 생성하고 테스트 사용자를 추가합니다.

## 🐛 문제 해결

### "Cannot find module" 에러
```bash
cd server
npm install
cd ../client
npm install
```

### 포트 충돌 (5001 또는 5173 이미 사용 중)
다른 프로세스를 종료하거나 포트를 변경하세요:

**서버 포트 변경** (`server/server.js`):
```javascript
const PORT = 5002; // 5001 → 5002로 변경
```

**클라이언트 API URL 변경** (`client/src/App.jsx`):
```javascript
const API_URL = 'http://localhost:5002/api'; // 5001 → 5002
```

### PIN 로그인이 작동하지 않음
1. 서버 콘솔에서 에러 메시지 확인
2. 브라우저 개발자 도구 > Network 탭에서 API 요청 확인
3. 데이터베이스 초기화 후 재시도

### 데이터베이스 확인

SQLite 데이터베이스를 직접 확인하려면:
```bash
cd server
sqlite3 database.db
```

SQL 명령어:
```sql
-- 모든 사용자 확인
SELECT * FROM users;

-- PIN 확인
SELECT username, name, pin FROM users;

-- 근무 기록 확인
SELECT * FROM shifts;

-- 종료
.quit
```

## 📝 로컬 테스트 후 배포

로컬에서 모든 기능이 정상 작동하면:

1. **Git 커밋**
   ```bash
   git add .
   git commit -m "feat: PIN 로그인 시스템으로 변경"
   git push origin main
   ```

2. **Supabase 데이터베이스 마이그레이션**
   - `PIN_MIGRATION.md` 파일 참고
   - Supabase SQL Editor에서 마이그레이션 SQL 실행

3. **Vercel 자동 배포 대기**
   - 약 1-2분 소요

4. **배포된 사이트에서 최종 테스트**

## 💡 팁

### 빠른 테스트를 위한 단축키
- **Ctrl + C**: 서버 종료
- **브라우저에서 Cmd + R**: 페이지 새로고침
- **브라우저에서 Cmd + Shift + R**: 캐시 무시하고 새로고침

### 개발 중 자동 새로고침
- 프론트엔드 코드 변경 시 자동으로 브라우저 새로고침
- 백엔드 코드 변경 시 서버 재시작 필요 (Ctrl + C 후 다시 실행)

### 콘솔 로그 확인
- **서버 로그**: 터미널에서 확인
- **클라이언트 로그**: 브라우저 개발자 도구 > Console 탭

## 🎯 성공 기준

다음 항목이 모두 작동하면 성공:
- ✅ PIN 4자리로 로그인
- ✅ 출퇴근 기능 정상 작동
- ✅ 근무 시간 자동 계산 (휴게시간 제외)
- ✅ 관리자 승인/수정/삭제 기능
- ✅ 월별 통계 조회

모든 테스트가 완료되면 배포를 진행하세요!
